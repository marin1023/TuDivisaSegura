import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.BVOCwoKb.js";const O=()=>{const[u,h]=a.useState("100"),[E,p]=a.useState(""),[c,j]=a.useState("USD"),[d,D]=a.useState("PEN"),[l,R]=a.useState({}),[S,v]=a.useState("send"),m={DEFAULT:.04,PEN_VES:0},f=a.useCallback((e,n)=>{const o=`${e}_${n}`,r=`${n}_${e}`;return m[o]!==void 0?m[o]:m[r]!==void 0?m[r]:m.DEFAULT},[m]);a.useEffect(()=>{(async()=>{try{const n=fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd,eur,pen"),o=fetch("https://api.frankfurter.app/latest?from=USD&to=EUR,PEN"),r=fetch("https://api.frankfurter.app/latest?from=EUR&to=USD,PEN"),g=fetch("https://api.frankfurter.app/latest?from=PEN&to=USD,EUR"),[B,H,$,F]=await Promise.all([n,o,r,g]),t=await B.json(),U=await H.json(),b=await $.json(),N=await F.json(),i=136.89,T=i/3,_={USD:{EUR:U.rates.EUR,PEN:U.rates.PEN,BTC:1/t.bitcoin.usd,ETH:1/t.ethereum.usd,VES:i},EUR:{USD:b.rates.USD,PEN:b.rates.PEN,BTC:1/t.bitcoin.eur,ETH:1/t.ethereum.eur,VES:b.rates.USD*i},PEN:{USD:N.rates.USD,EUR:N.rates.EUR,BTC:1/t.bitcoin.pen,ETH:1/t.ethereum.pen,VES:T},BTC:{USD:t.bitcoin.usd,EUR:t.bitcoin.eur,PEN:t.bitcoin.pen,ETH:t.bitcoin.usd/t.ethereum.usd,VES:t.bitcoin.usd*i},ETH:{USD:t.ethereum.usd,EUR:t.ethereum.eur,PEN:t.ethereum.pen,BTC:t.ethereum.usd/t.bitcoin.usd,VES:t.ethereum.usd*i},VES:{USD:1/i,EUR:1/(b.rates.USD*i),PEN:1/T,BTC:1/(t.bitcoin.usd*i),ETH:1/(t.ethereum.usd*i)}};R(_)}catch(n){console.error("Error fetching exchange rates:",n);const o=136.89,r=136.89/3;R({USD:{EUR:.92,VES:o,PEN:3.7,BTC:16666666666666667e-21,ETH:.0003333333333333333},EUR:{USD:1.08,VES:1.08*o,PEN:4,BTC:18181818181818182e-21,ETH:.00035714285714285714},VES:{USD:1/o,EUR:1/(1.08*o),PEN:1/r,BTC:1/(6e4*o),ETH:1/(3e3*o)},PEN:{USD:.27,EUR:.25,VES:r,BTC:4504504504504505e-21,ETH:9009009009009009e-20},BTC:{USD:6e4,EUR:55e3,PEN:222e3,VES:6e4*o,ETH:20},ETH:{USD:3e3,EUR:2800,PEN:11100,VES:3e3*o,BTC:.05}})}})()},[]);const y=a.useCallback(()=>{if(Object.keys(l).length===0)return;const e=f(c,d);if(S==="send"){const n=parseFloat(u);if(!n||isNaN(n)){p("");return}const o=l[c]?.[d];if(!o){p("");return}const g=n*(1-e)*o;p(g.toFixed(2))}else{const n=parseFloat(E);if(!n||isNaN(n)){h("");return}const o=l[c]?.[d];if(!o){h("");return}const r=n/o/(1-e);h(r.toFixed(2))}},[u,E,c,d,l,S,f]);a.useEffect(()=>{y()},[y]);const P=e=>{h(e.target.value),v("send")},w=e=>{p(e.target.value),v("receive")},V=e=>{j(e.target.value)},A=e=>{D(e.target.value)},x=f(c,d),C=u?(parseFloat(u)*x).toFixed(2):"0.00",k=()=>{const e=`Hola, vengo de TuDivisaSegura y quisiera hacer una consulta sobre la siguiente conversión:
- Envío: ${u} ${c}
- Recibes: ${E} ${d}
- Comisión (${(x*100).toFixed(0)}%): ${C} ${c}`,n=`https://wa.me/51925846218?text=${encodeURIComponent(e)}`;window.open(n,"_blank")};return s.jsx("div",{className:"flex flex-col items-center justify-center font-sans",children:s.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-2xl shadow-xl",children:[s.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800",children:"Conversor de Divisas"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sendAmount",className:"text-sm font-medium text-gray-600",children:"ENVIAS"}),s.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[s.jsx("input",{id:"sendAmount",type:"number",value:u,onChange:P,placeholder:"0.00",className:"flex-1 block w-full px-4 py-3 text-lg text-gray-900 bg-gray-50 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"}),s.jsx("select",{value:c,onChange:V,className:"px-4 py-3 bg-gray-100 border-t border-b border-r border-gray-300 text-gray-900 rounded-r-md focus:ring-blue-500 focus:border-blue-500",children:Object.keys(l).map(e=>s.jsx("option",{value:e,children:e},e))})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"receiveAmount",className:"text-sm font-medium text-gray-600",children:"RECIBES"}),s.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[s.jsx("input",{id:"receiveAmount",type:"number",value:E,onChange:w,placeholder:"0.00",className:"flex-1 block w-full px-4 py-3 text-lg text-gray-900 bg-gray-50 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500"}),s.jsx("select",{value:d,onChange:A,className:"px-4 py-3 bg-gray-100 border-t border-b border-r border-gray-300 text-gray-900 rounded-r-md focus:ring-blue-500 focus:border-blue-500",children:Object.keys(l).map(e=>s.jsx("option",{value:e,children:e},e))})]})]})]}),s.jsx("div",{className:"text-sm text-center text-gray-500",children:s.jsxs("p",{children:["Comisión de envío (",x*100,"%): ",s.jsxs("span",{className:"font-semibold text-gray-700",children:[C," ",c]})]})}),s.jsx("button",{onClick:k,disabled:!u||!E,className:"w-full px-4 py-3 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Comenzar Ahora"})]})})};export{O as default};
